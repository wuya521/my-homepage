# 💎 黑钻会员系统设计

## 系统概述

黑钻会员是花园人生游戏的付费会员系统，提供"省时间 + 更好看 + 更安全"的特权，不直接数值碾压。

## 黑钻等级体系

### 等级划分

| 等级 | 订阅时长 | 额外特权 | 月费 |
|------|---------|---------|------|
| 黑钻1 | 连续1个月 | 基础特权 | ¥15 |
| 黑钻2 | 连续3个月 | +10%收益 | ¥15 |
| 黑钻3 | 连续6个月 | +20%收益 | ¥15 |
| 黑钻4 | 连续12个月 | +30%收益+专属外观 | ¥15 |

### 升级机制
- 连续订阅自动升级
- 断续重新从黑钻1开始
- 累计订阅月数永久保留

## 特权详情

### 1. 基础特权（所有黑钻共享）

#### ⚡ 体力上限 +20%
- 普通玩家：100体力
- 黑钻会员：120体力
- 作用：可以多做2-3个事件

#### 🚀 离线生长加速 20%
- 普通种子：2小时 → 1.6小时
- 稀有种子：4小时 → 3.2小时
- 不影响在线体验

#### 🛡️ 每日防偷保护罩 ×1
- 每天自动获得1个保护罩
- 价值200金币
- 保护24小时

#### 🌾 一键收获/浇水
- 单次点击收获所有成熟作物
- 批量浇水好友（最多5人）
- 节省大量时间

#### 🔄 断签保护（7天）
- 7天内可补签
- 不损失连续签到天数
- 补签消耗100金币

#### 👑 黑钻专属边框
- 个人卡片金色边框
- 排行榜黑钻标识
- 聊天/留言特殊样式

#### 💡 事件选项提示
- 显示选项倾向（偏金币/偏经验/偏道具）
- 不直接显示具体数值
- 帮助做出更好选择

#### 🎒 背包上限提升 50%
- 普通：每种道具上限99
- 黑钻：每种道具上限150
- 减少整理频率

#### 📜 每日额外事件次数 +5
- 普通：10次/天
- 黑钻：15次/天
- 更多探索机会

#### ⭐ 黑钻专属事件
- 触发概率5%
- 奖励更丰厚
- 有专属剧情

### 2. 等级特权（递进解锁）

#### 黑钻2级额外特权
- 全局收益 +10%
- 专属称号：「钻石会员」
- 每周赠送1个加速卡

#### 黑钻3级额外特权
- 全局收益 +20%
- 专属称号：「铂金会员」
- 每周赠送2个加速卡
- 花园格子 +1（总共5个）

#### 黑钻4级额外特权
- 全局收益 +30%
- 专属称号：「至尊会员」
- 专属头像框架（彩虹渐变）
- 每周赠送3个加速卡
- 花园格子 +2（总共6个）
- 每月专属礼包

## 数据结构

### 黑钻档案
```javascript
{
  email: "user@example.com",
  active: true,                    // 是否激活
  level: 1,                        // 黑钻等级（1-4）
  expireAt: "2024-02-01T00:00:00Z", // 到期时间
  activatedAt: "2024-01-01T00:00:00Z", // 首次激活时间
  renewedAt: "2024-01-01T00:00:00Z",   // 最近续费时间
  totalMonths: 3,                  // 累计订阅月数
  consecutiveMonths: 3,            // 连续订阅月数
  autoRenew: true,                 // 自动续费
  benefits: {                      // 已使用的特权
    dailyShield: false,            // 今日保护罩
    weeklyCards: 0                 // 本周加速卡
  },
  history: []                      // 订阅历史
}
```

## API接口

### 用户接口

#### 检查黑钻状态
```
GET /api/game/blackdiamond/check?email=xxx
Response: { active, level, expireAt, benefits }
```

#### 激活黑钻
```
POST /api/game/blackdiamond/activate
Body: { email, months, paymentId }
Response: { success, expireAt, level }
```

#### 领取每日特权
```
POST /api/game/blackdiamond/daily-claim
Body: { email }
Response: { success, rewards: { shield: 1 } }
```

#### 领取每周特权
```
POST /api/game/blackdiamond/weekly-claim
Body: { email }
Response: { success, rewards: { speed_card: 2 } }
```

### 管理员接口

#### 获取所有黑钻用户
```
GET /api/admin/game/blackdiamond
Response: [{ email, level, expireAt, ... }]
```

#### 开通黑钻（赠送）
```
POST /api/admin/game/blackdiamond/grant
Body: { email, months }
Response: { success }
```

#### 取消黑钻
```
POST /api/admin/game/blackdiamond/revoke
Body: { email }
Response: { success }
```

## 特权实现逻辑

### 体力上限
```javascript
// 创建档案时
if (hasBlackDiamond) {
  profile.maxEnergy = 120;
} else {
  profile.maxEnergy = 100;
}
```

### 离线加速
```javascript
// 计算成熟时间
let growTime = seed.growTime;
if (hasBlackDiamond) {
  growTime = growTime * 0.8; // 减少20%时间
}
```

### 收益加成
```javascript
// 计算奖励时
let reward = baseReward;
if (hasBlackDiamond) {
  const bonusRate = 1 + (blackDiamondLevel * 0.1);
  reward = Math.floor(reward * bonusRate);
}
```

### 一键操作
```javascript
// 前端显示
if (hasBlackDiamond) {
  showQuickHarvestButton();
  showQuickWaterButton();
}
```

## 前端展示

### 黑钻标识位置
1. 个人卡片：金色/彩虹边框
2. 排行榜：黑钻图标 💎
3. 花园页面：特殊装饰
4. 聊天/留言：专属样式

### 黑钻购买入口
- 游戏内悬浮按钮
- 个人中心黑钻卡片
- 特权说明页面

### UI设计
- 金色/紫色渐变主题
- 星光/光晕特效
- 动态徽章动画
- 高级质感

## 支付对接（待实现）

### 支付方式
1. 微信支付
2. 支付宝
3. PayPal（国际）

### 支付流程
```
用户选择套餐 → 创建订单 → 调用支付接口 
  → 用户支付 → 支付回调 → 激活黑钻 → 发放特权
```

### 订单管理
- 订单号生成
- 支付状态追踪
- 自动续费逻辑
- 退款处理

## 运营策略

### 首充优惠
- 首次购买8折
- 赠送新手礼包
- 额外道具奖励

### 长期订阅优惠
- 3个月9折
- 6个月8折
- 12个月7折

### 活动促销
- 节日限时折扣
- 邀请好友奖励
- 升级礼包赠送

## 注意事项

### 平衡性
- 不能让非黑钻玩家感到被碾压
- 特权主要是便利性，不是暴力数值
- 保持游戏公平性

### 用户体验
- 自由选择是否开通
- 不强制氪金
- 免费也能完整体验
- 黑钻是锦上添花

### 技术实现
- 到期自动降级
- 断续重新计算等级
- 每日/每周特权重置
- 防止刷特权

## 实现优先级

### Phase 1: 基础框架
- [ ] 黑钻数据模型
- [ ] 激活/续费接口
- [ ] 状态检查接口
- [ ] 基础特权实现

### Phase 2: 特权功能
- [ ] 体力上限提升
- [ ] 生长加速
- [ ] 一键操作
- [ ] 每日保护罩

### Phase 3: UI和展示
- [ ] 黑钻标识
- [ ] 专属边框
- [ ] 购买页面
- [ ] 特权说明

### Phase 4: 支付对接
- [ ] 订单系统
- [ ] 支付接口
- [ ] 回调处理
- [ ] 自动续费

## 收益预估

### 转化率预估
- 总用户：1000人
- 黑钻转化率：5-10%
- 黑钻用户：50-100人
- 月收入：750-1500元

### 提升转化率
- 优化特权吸引力
- 完善用户体验
- 增加社交压力
- 限时优惠活动

## 总结

黑钻系统设计遵循"不破坏平衡又愿意付费"的原则：
- ✅ 省时间：一键操作、加速卡、自动保护
- ✅ 更好看：专属外观、边框、称号
- ✅ 更安全：防偷保护、断签保护
- ✅ 更轻松：额外事件、背包扩容

让玩家感受到物有所值，而不是必须氪金才能玩！

