# 🏡 花园人生 - 完整功能说明

## 游戏概述

花园人生是一款轻量级的文字养成游戏，融合了QQ空间式的社交互动玩法。玩家可以签到、触发随机事件、种植作物、与好友互动，并通过排行榜竞争。

## 核心功能

### 1. 📅 每日签到系统

**功能**：
- 每天可签到一次
- 签到奖励：+20体力、+50金币、+20经验
- 体力用于触发事件和互动

**特点**：
- 自动检测是否已签到
- 签到后按钮变为"今日已签到"
- 奖励即时到账

### 2. 📜 随机事件系统

**功能**：
- 每天可触发10次随机事件
- 5种预置事件，基于权重随机
- 每个事件有2-4个选项
- 不同选择有不同的消耗和奖励

**预置事件**：

#### 路过花市
- 买普通种子（-10金币，+普通种子）
- 买稀有种子（-50金币，+稀有种子）
- 和老人聊天（+5经验，+幸运状态）
- 离开（+5金币）

#### 神秘商人
- 用材料换肥料（-3木材，+2肥料）
- 用金币买加速卡（-100金币，+加速卡）
- 拒绝交易（+10金币）

#### 打工机会
- 轻松打工（-10体力，+30金币+5经验）
- 辛苦打工（-20体力，+80金币+15经验）
- 拒绝

#### 冒险探索
- 谨慎探索（-15体力，80%概率获得奖励）
- 深入探索（-30体力，50%概率获得大奖励）
- 放弃探索（+5金币）

#### 好友求助
- 帮忙浇水（-5体力，+10经验+好感度）
- 送礼物（-20金币，+15经验+好感度）
- 婉拒

**特点**：
- 概率系统：部分选项有失败概率
- 资源检查：不足时无法选择
- 实时反馈：立即显示奖励结果

### 3. 🌻 花园种植系统

**功能**：
- 4块可种植的格子
- 种植种子，等待成熟
- 收获获得金币和经验

**种子类型**：
- 🌱 普通种子：2小时成熟，收获100金币
- 🌺 稀有种子：4小时成熟，收获200金币

**互动机制**：
- 被好友浇水：收益+10金币/次
- 被好友偷菜：收益-20金币/次（最多3次）
- 使用保护罩：24小时内免疫偷菜

**道具系统**：
- 💩 肥料：减少50%生长时间
- ⚡ 加速卡：立即成熟
- 🛡️ 保护罩：24小时防偷保护

**特点**：
- 实时倒计时显示
- 自动刷新（每分钟）
- 一键收获功能
- 访客记录展示

### 4. 🎒 背包系统

**功能**：
- 查看所有道具和数量
- 使用消耗性道具
- 道具分类展示

**道具类型**：
- 种子类：用于种植
- 消耗类：使用后产生效果
- 材料类：用于交易或合成

**使用流程**：
1. 打开背包查看道具
2. 点击"使用"按钮
3. 选择目标格子（如需要）
4. 确认使用

### 5. 👥 好友互动系统

**功能**：
- 访问好友花园
- 三种互动方式

**互动选项**：

#### 💧 浇水
- 消耗：无
- 奖励：+10经验
- 效果：增加好友作物收益
- 限制：每人每天一次

#### 🥷 偷菜
- 消耗：无
- 奖励：金币（根据作物数量）
- 效果：减少好友作物收益
- 限制：每人每天一次，受保护时无效

#### 🎁 送礼
- 消耗：20金币
- 奖励：+15经验
- 效果：增加好感度
- 限制：每人每天一次

**特点**：
- 防刷机制：每天只能访问一次
- 访客记录：显示最近5位访客
- 保护机制：可使用保护罩防偷

### 6. 🏪 商店系统

**商品列表**：

| 商品 | 价格 | 说明 |
|------|------|------|
| 🌱 普通种子 | 10金币 | 可种植普通作物 |
| 🌺 稀有种子 | 50金币 | 可种植稀有作物 |
| 💩 肥料 | 30金币 | 加速作物生长50% |
| ⚡ 加速卡 | 100金币 | 立即完成生长 |
| 🛡️ 防偷保护罩 | 200金币 | 保护花园24小时 |

**购买流程**：
1. 查看商品和价格
2. 点击"购买"按钮
3. 确认购买
4. 道具自动进入背包

### 7. 🏆 排行榜系统

**榜单类型**：

#### 💰 财富榜
- 排序依据：金币数量
- 展示：前20名
- 更新：实时

#### 🌾 收获榜
- 排序依据：总收获次数
- 展示：前20名
- 更新：实时

#### ❤️ 助人榜
- 排序依据：总助人次数
- 展示：前20名
- 更新：实时

**特点**：
- 前三名特殊标识（金、银、铜）
- 显示用户等级
- 显示具体分数

## 资源系统

### 体力系统
- 初始：100点
- 上限：100点（黑钻可提升至120）
- 恢复：10点/小时，自动恢复
- 消耗：触发事件、互动

### 金币系统
- 初始：100金币
- 获取：签到、事件、收获、偷菜
- 消耗：购买道具、送礼

### 经验系统
- 初始：0经验
- 获取：签到、事件、收获、互动
- 作用：提升游戏等级

### 道具系统
- 种子：用于种植
- 消耗品：使用后消失
- 材料：用于交易

## 黑钻会员系统（已预留接口）

### 特权列表
1. ⚡ 体力上限 +20% (100 → 120)
2. 🚀 离线生长加速 20%
3. 🛡️ 每日防偷保护罩 ×1
4. 🌾 一键收获/浇水
5. 🔄 断签保护（7天内可补签）
6. 👑 黑钻专属边框和称号
7. 💡 事件选项提示
8. 🎒 背包上限提升 50%
9. 📜 每日额外事件次数 +5
10. ⭐ 黑钻专属事件

### 黑钻等级
- 黑钻1级：连续订阅1个月
- 黑钻2级：连续订阅3个月，+10%收益
- 黑钻3级：连续订阅6个月，+20%收益
- 黑钻4级：连续订阅12个月，+30%收益

## 游戏机制

### 防刷机制
- 每日事件次数限制
- 访问好友每天一次
- 服务端计算所有奖励
- 资源不足无法操作

### 数据记录
- 流水记录：所有资产变动
- 访客记录：显示最近访客
- 操作日志：防止作弊

### 时间系统
- 体力自动恢复
- 每日数据自动重置
- 作物成熟倒计时
- 保护罩到期机制

## 数值平衡

### 收益分析

**每日基础收益**（不消耗体力）：
- 签到：50金币 + 20经验

**积极玩家收益**（10次事件）：
- 打工收益：300-800金币 + 50-150经验
- 事件奖励：50-500金币（含概率）
- 花园收获：400-800金币 + 80经验
- **日均总计**：800-2100金币 + 150-250经验

**社交收益**：
- 浇水好友：+10经验/人
- 偷菜获得：10-50金币/人
- 送礼消耗：-20金币，+15经验

### 消耗平衡
- 种子成本：10-50金币
- 道具成本：30-200金币
- 礼物成本：20金币

## 用户体验

### 优化点
1. ✅ 实时数据更新
2. ✅ 自动刷新花园倒计时
3. ✅ 清晰的操作反馈
4. ✅ 友好的错误提示
5. ✅ 响应式设计
6. ✅ 流畅的动画效果

### 新手引导
- 首次进入自动创建档案
- 初始赠送100金币
- 提示性文字说明
- 操作简单易懂

## 管理后台

### 游戏配置
- 启用/禁用游戏
- 最大体力设置
- 体力恢复速率
- 每日事件上限
- 花园格子数

### 统计数据
- 总玩家数
- 今日活跃用户
- 总金币数
- 平均等级

### 事件管理
- 查看所有事件
- 修改事件权重
- 调整奖励数值

### 道具管理
- 查看所有道具
- 修改道具效果
- 调整商品价格

## 技术实现

### 后端API
- RESTful风格
- JSON数据格式
- 完整的错误处理
- 数据验证和安全检查

### 前端技术
- 原生JavaScript
- 无依赖框架
- 响应式设计
- 优化的用户体验

### 数据存储
- Cloudflare KV
- JSON格式存储
- 增量更新
- 定期清理

## 未来扩展

### 已规划功能
1. 公会系统
2. PVP竞技场
3. 节日活动
4. 限时挑战
5. 交易市场
6. 成就系统
7. 赛季通行证
8. 更多作物和配方

### 黑钻系统
- 支付接口对接
- 黑钻等级系统
- 专属特权实现
- 专属外观和称号

## 运营建议

### 新手期（1-7天）
- 每日签到获得基础资源
- 触发事件积累金币
- 学习花园种植
- 尝试好友互动

### 成长期（1-4周）
- 优化种植策略
- 参与排行榜竞争
- 建立好友网络
- 积累稀有道具

### 稳定期（1个月+）
- 维持每日活跃
- 争夺榜单排名
- 参与赛季活动
- 考虑开通黑钻

## 数据安全

### 防作弊措施
1. 服务端计算所有奖励
2. 资源变动完整记录
3. 操作频率限制
4. 异常数据监控

### 数据备份
- KV存储自动备份
- 流水记录可追溯
- 支持数据恢复

## 玩家反馈

### 优点
- 玩法简单易懂
- 社交互动有趣
- 数值平衡合理
- 每天3-5分钟即可

### 待改进
- 增加更多事件
- 丰富道具种类
- 优化UI美观度
- 添加音效

## 总结

花园人生游戏已经实现了完整的MVP版本，包含：
- ✅ 签到系统
- ✅ 随机事件系统（5种事件）
- ✅ 花园种植系统（种植、收获、道具）
- ✅ 好友互动系统（浇水、偷菜、送礼）
- ✅ 商店系统（5种商品）
- ✅ 排行榜系统（3种榜单）
- ✅ 背包系统
- ✅ 资源管理系统

游戏已经可以完整运行，提供了丰富的玩法和良好的用户体验！🎮

